# coding=UTF-8
# ex:ts=4:sw=4:et=on

# Copyright (c) 2013, Mathijs Dumon
# All rights reserved.
# Complete license can be found in the LICENSE file.

from pkg_resources import resource_filename  # @UnresolvedImport

from pyxrd.generic.views import DialogView


class AddInSituBehaviourView(DialogView):
    title = "Add Behaviour"
    subview_builder = resource_filename(__name__, "ui/add_behaviour.ui")
    subview_toplevel = "add_behaviour_container"

    def __init__(self, *args, **kwargs):
        DialogView.__init__(self, *args, **kwargs)

    def get_behaviour_type(self):
        combo = self.behaviour_combo_box
        if combo is None:
            return None
        idx = combo.currentIndex()
        if idx < 0:
            return None
        model = combo.model()
        if model is None:
            return None
        qidx = model.index(idx, 1)
        return model.data(qidx)

    @property
    def behaviour_combo_box(self):
        return self["cmb_behaviours"]

    pass  # end of class
